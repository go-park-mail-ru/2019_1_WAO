<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- <script src='main.js'></script> -->
</head>
<body>
    <input type="text" name="input" id="input"><br>
    <button id="click" onclick="start();">Start</button><br>
    <button id="click" onclick="stop();">Click</button>
    <button id="click" onclick="sendMessage();">Send</button><br>
    <h2>WebSocket Test</h2>
    <canvas height='320' width='480' id='example'>Обновите браузер</canvas>
    <script>
        var example = document.getElementById("example"),
            ctx     = example.getContext('2d');
        ctx.fillRect(0, 0, example.width, example.height);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script>
//       var socket = io('ws://127.0.0.1:8080/move', {transports: ['websocket']});

// // listen for messages
// socket.on('chat message', function(message) {

//     alert('new message');
//     alert(message);
// });

// socket.on('connect', function () {

//     console.log('socket connected');
// });

// function sendMessage() {
//     socket.emit('right', '{"a": 1, "b": 2}');
// }
var socket = new WebSocket("ws://127.0.0.1:8080/websocket");
function stop() {
    
}
socket.onopen = () => {
    alert("Соединение установлено!");
//     for (var i = 0; i < 3; i++) {
//   socket.send(JSON.stringify({
//     type: 'move',
//     payload: {
//         direction: 'LEFT',
//         dt: 5.06,
//     },
// }));  
// }
}
socket.onclose = () => {
    alert("Соединение оборвалось");
}
socket.onmessage = (event) => {
    // var human = JSON.parse(event.data);
    // alert(`My name is ${human.name} and my id = ${human.id}`);
    alert(event.data);
}
function sendMessage() {
    // socket.send(JSON.stringify({id: 6, name: 'Igor'}));   
    socket.send(JSON.stringify({
        type: 'map',
    }
    ));
}


    </script>
</body>
</html>